<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="css/style.css">
  <meta name="description" content="">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">
  <meta property="og:image:alt" content="">

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.png">

  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#fafafa">
</head>

<body>
  <header>
    <h1>Generator playlist</h1>
  </header>
  <main>
    <form id="playlist-form">
      <label for="playlistName">Nazwa playlisty: </label>
      <input type="text" id="playlistName" name="playlistName" placeholder="Podaj nazwę playlisty"><br/>

      <label for="playlistDescription">Opis playlisty: </label>
      <input type="text" id="playlistDescription" name="playlistDescription" placeholder="Wprowadź opis playlisty"><br/>

      <p>Sposób generowania:</p>
      <input type="radio" id="tracklist" name="generationMethod" value="tracklist" checked>
      <label for="tracklist">Lista utworów</label><br/>

      <input type="radio" id="prompt" name="generationMethod" value="prompt">
      <label for="prompt">Prompt</label><br/><br/>

      <div id="tracklist_container">
        <label for="tracklist_input">Lista utworów: </label><br/>
        <input type="text" id="tracklist_input" name="tracklist_input" placeholder="Artysta - tytuł"><br/><br/>
      </div>
      <div id="prompt_container">
        <label for="prompt_input">Prompt: </label><br/>
        <input type="text" id="prompt_input" name="prompt_input" placeholder="Muza do latania bokiem"><br/><br/>
      </div>

      
      <div class="languages_container"><p>Języki piosenek:</p>
        <input type="checkbox" id="language1" name="language" value="polish">
        <label for="language1">Polski</label><br/>

        <input type="checkbox" id="language2" name="language" value="english">
        <label for="language2">Angielski</label><br/>

        <input type="checkbox" id="language3" name="language" value="other">
        <label for="language3">Inne</label><br/>
      </div>
      

      <div class="genres_container"><p>Gatunki muzyczne:</p>
        <input type="checkbox" id="genre1" name="genre" value="pop">
        <label for="genre1">Pop</label><br/>

        <input type="checkbox" id="genre2" name="genre" value="rock">
        <label for="genre2">Rock</label><br/>

        <input type="checkbox" id="genre3" name="genre" value="hiphop">
        <label for="genre3">Hip-Hop</label><br/>

        <input type="checkbox" id="genre4" name="genre" value="rap">
        <label for="genre4">Rap</label><br/>

        <input type="checkbox" id="genre5" name="genre" value="rnb">
        <label for="genre5">R&B</label><br/>

        <input type="checkbox" id="genre6" name="genre" value="electronic">
        <label for="genre6">Elektroniczna</label><br/>

        <input type="checkbox" id="genre7" name="genre" value="dance">
        <label for="genre7">Dance</label><br/>

        <input type="checkbox" id="genre8" name="genre" value="house">
        <label for="genre8">House</label><br/>

        <input type="checkbox" id="genre9" name="genre" value="disco">
        <label for="genre9">Disco</label><br/>

        <input type="checkbox" id="genre10" name="genre" value="techno">
        <label for="genre10">Techno</label><br/>

        <input type="checkbox" id="genre11" name="genre" value="metal">
        <label for="genre11">Metal</label><br/>

        <input type="checkbox" id="genre12" name="genre" value="reggae">
        <label for="genre12">Reggae</label><br/>

        <input type="checkbox" id="genre13" name="genre" value="blues">
        <label for="genre13">Blues</label><br/>

        <input type="checkbox" id="genre14" name="genre" value="jazz">
        <label for="genre14">Jazz</label><br/>

        <input type="checkbox" id="genre15" name="genre" value="soul">
        <label for="genre15">Soul</label><br/>

        <input type="checkbox" id="genre16" name="genre" value="funk">
        <label for="genre16">Funk</label><br/>

        <input type="checkbox" id="genre17" name="genre" value="classical">
        <label for="genre17">Klasyczna</label><br/>

        <input type="checkbox" id="genre18" name="genre" value="country">
        <label for="genre18">Country</label><br/>

        <input type="checkbox" id="genre19" name="genre" value="folk">
        <label for="genre19">Folk</label><br/>

        <input type="checkbox" id="genre20" name="genre" value="latino">
        <label for="genre20">Latino</label><br/>

        <input type="checkbox" id="genre21" name="genre" value="kpop">
        <label for="genre21">K-Pop</label><br/>

        <input type="checkbox" id="genre22" name="genre" value="reggaeton">
        <label for="genre22">Reggaeton</label><br/>

        <input type="checkbox" id="genre23" name="genre" value="trap">
        <label for="genre23">Trap</label><br/>

        <input type="checkbox" id="genre24" name="genre" value="edm">
        <label for="genre24">EDM</label><br/>

        <input type="checkbox" id="genre25" name="genre" value="punk">
        <label for="genre25">Punk</label><br/>
      </div>

      <input type="submit" value="Generuj">
    </form>

    <div id="response_container"></div>

  </main>
  <footer>footer</footer>
<!--  <script src="js/app.js"></script>-->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
    $('#tracklist').click(function() {
      $('#tracklist_container').show();
      
      $('#prompt_container').hide();
      $('.languages_container').hide();
      $('.genres_container').hide();
    });

    $('#prompt').click(function() {
      $('#tracklist_container').hide();

      $('#prompt_container').show();
      $('.languages_container').show();
      $('.genres_container').show();
    });

    $('#playlist-form').on('submit', async function(e) {
      e.preventDefault();

      const playlistName = $('#playlistName').val(); // Nazwa playlisty
      const playlistDescription = $('#playlistDescription').val(); // Opis playlisty

      const generationMethod = $('input[name=generationMethod]:checked').val(); // Sposób generowania - tracklista / prompt
      const tracklist_input = $('#tracklist_input').val();
      const prompt_input = $('#prompt_input').val();

      let languages = [];
      $('input[name=language]:checked').each(function() {
        languages.push($(this).val());
      });

      let genres = [];
      $('input[name=genre]:checked').each(function() {
        genres.push($(this).val());
      });

      const response = await fetch('./php/generate.php', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          playlistName: playlistName,
          playlistDescription: playlistDescription,
          generationMethod: generationMethod,
          tracklist_input: tracklist_input,
          prompt_input: prompt_input,
          languages: languages,
          genres: genres
        })
      });

      const data = await response.json();

      $('#response_container').text("Odpowiedź z serwera: " + JSON.stringify(data));
    });

  </script>
</body>

</html>
